<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="698" version="1.1" width="977" xmlns="http://www.w3.org/2000/svg">
<rect fill="#ffc8ff" height="150" stroke="#ffc8ff" stroke-width="1" width="263" x="122" y="167"/>
<rect fill="none" height="150" stroke="#000000" stroke-width="1" width="263" x="122" y="167"/>
<text font-family="Dialog" font-size="12" x="193" y="180">
PersistenceFacade</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="263" x="122" y="190"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="263" x="122" y="211"/>
<text font-family="Dialog" font-size="12" x="126" y="225">
getUser(String)</text>
<text font-family="Dialog" font-size="12" x="126" y="241">
putUser(UserData)</text>
<text font-family="Dialog" font-size="12" x="126" y="257">
getFriendship(String,String)</text>
<text font-family="Dialog" font-size="12" x="126" y="273">
putFriendship(Friendship)</text>
<text font-family="Dialog" font-size="12" x="126" y="289">
getFriends(String) : List&lt;String&gt;</text>
<text font-family="Dialog" font-size="12" x="126" y="305">
getPendingFriends(String) : List&lt;String&gt;</text>
<rect fill="#ffc8ff" height="117" stroke="#ffc8ff" stroke-width="1" width="257" x="538" y="167"/>
<rect fill="none" height="117" stroke="#000000" stroke-width="1" width="257" x="538" y="167"/>
<text font-family="Dialog" font-size="12" font-style="italic" x="629" y="180">
UserMapper</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="257" x="538" y="190"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="257" x="538" y="211"/>
<text font-family="Dialog" font-size="12" x="542" y="225">
get(String) : UserData</text>
<text font-family="Dialog" font-size="12" x="542" y="241">
put(UserData)</text>
<text font-family="Dialog" font-size="12" font-style="italic" x="542" y="257">
getUserFromStorage(String) : UserData</text>
<text font-family="Dialog" font-size="12" font-style="italic" x="542" y="273">
putUserToStorage(UserData)</text>
<rect fill="#ffffc8" height="102" stroke="#ffffc8" stroke-width="1" width="123" x="266" y="31"/>
<rect fill="none" height="102" stroke="#000000" stroke-width="1" width="123" x="266" y="31"/>
<text font-family="Dialog" font-size="12" x="298" y="44">
UserData</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="123" x="266" y="54"/>
<text font-family="Dialog" font-size="12" x="270" y="68">
nickname : String</text>
<text font-family="Dialog" font-size="12" x="270" y="84">
email : String</text>
<text font-family="Dialog" font-size="12" x="270" y="100">
password : char</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="123" x="266" y="110"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="314" x2="314" y1="167" y2="162"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="314" x2="314" y1="157" y2="152"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="314" x2="314" y1="147" y2="142"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="314" x2="314" y1="137" y2="132"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="321" x2="314" y1="144" y2="132"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="307" x2="314" y1="144" y2="132"/>
<rect fill="#ffffc8" height="102" stroke="#ffffc8" stroke-width="1" width="129" x="42" y="31"/>
<rect fill="none" height="102" stroke="#000000" stroke-width="1" width="129" x="42" y="31"/>
<text font-family="Dialog" font-size="12" x="74" y="44">
Friendship</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="129" x="42" y="54"/>
<text font-family="Dialog" font-size="12" x="46" y="68">
requester : String</text>
<text font-family="Dialog" font-size="12" x="46" y="84">
requested : String</text>
<text font-family="Dialog" font-size="12" x="46" y="100">
status : Status</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="129" x="42" y="110"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="146" x2="146" y1="167" y2="162"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="146" x2="146" y1="157" y2="152"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="146" x2="146" y1="147" y2="142"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="146" x2="146" y1="137" y2="132"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="153" x2="146" y1="144" y2="132"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="139" x2="146" y1="144" y2="132"/>
<polyline fill="none" points="384,231 538,231" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="526" x2="538" y1="238" y2="231"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="526" x2="538" y1="224" y2="231"/>
<text font-family="Dialog" font-size="12" x="519" y="226">
1</text>
<text font-family="Dialog" font-size="12" x="455" y="247">
userMapper</text>
<polyline fill="none" points="586,167 586,79 388,79" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="400" x2="388" y1="72" y2="79"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="400" x2="388" y1="86" y2="79"/>
<text font-family="Dialog" font-size="12" x="392" y="74">
0..*</text>
<text font-family="Dialog" font-size="12" x="393" y="94">
cachedUsers</text>
<rect fill="#ffc8ff" height="88" stroke="#ffc8ff" stroke-width="1" width="257" x="434" y="375"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="257" x="434" y="375"/>
<text font-family="Dialog" font-size="12" x="512" y="388">
RDBUserMapper</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="257" x="434" y="398"/>
<text font-family="Dialog" font-size="12" x="438" y="412">
conn : Connection</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="257" x="434" y="422"/>
<text font-family="Dialog" font-size="12" x="438" y="436">
getUserFromStorage(String) : UserData</text>
<text font-family="Dialog" font-size="12" x="438" y="452">
putUserToStorage(UserData)</text>
<rect fill="#ffc8ff" height="85" stroke="#ffc8ff" stroke-width="1" width="257" x="706" y="375"/>
<rect fill="none" height="85" stroke="#000000" stroke-width="1" width="257" x="706" y="375"/>
<text font-family="Dialog" font-size="12" x="772" y="388">
MemoryUserMapper</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="257" x="706" y="398"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="257" x="706" y="419"/>
<text font-family="Dialog" font-size="12" x="710" y="433">
getUserFromStorage(String) : UserData</text>
<text font-family="Dialog" font-size="12" x="710" y="449">
putUserToStorage(UserData)</text>
<polyline fill="none" points="762,375 762,283" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="762,283 769,295 755,295" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="762,283 769,295 755,295" stroke="#000000" stroke-width="1"/>
<ellipse cx="760" cy="329" fill="#000000" rx="0.5" ry="0.5" stroke="#000000" stroke-width="1"/>
<ellipse cx="761" cy="330" fill="#ffffff" rx="-0.5" ry="-0.5" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="610,375 610,283" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="610,283 617,295 603,295" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="610,283 617,295 603,295" stroke="#000000" stroke-width="1"/>
<rect fill="#ffc8ff" height="181" stroke="#ffc8ff" stroke-width="1" width="265" x="490" y="503"/>
<rect fill="none" height="181" stroke="#000000" stroke-width="1" width="265" x="490" y="503"/>
<text font-family="Dialog" font-size="12" x="575" y="516">
RDBOperations</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="265" x="490" y="526"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="265" x="490" y="547"/>
<text font-family="Dialog" font-size="12" x="494" y="561">
getUser(String) : ResultSet</text>
<text font-family="Dialog" font-size="12" x="494" y="577">
insertUser(UserData)</text>
<text font-family="Dialog" font-size="12" x="494" y="593">
updateUser(UserData)</text>
<text font-family="Dialog" font-size="12" x="494" y="609">
getFriendship(String,String) : ResultSet</text>
<text font-family="Dialog" font-size="12" x="494" y="625">
insertFriendship(Friendship)</text>
<text font-family="Dialog" font-size="12" x="494" y="641">
updateFriendship(Friendship)</text>
<text font-family="Dialog" font-size="12" x="494" y="657">
getAllFriends(String) : ResultSet</text>
<text font-family="Dialog" font-size="12" x="494" y="673">
getPendingRequests(String) : ResultSet</text>
<polyline fill="none" points="586,462 586,503" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="579" x2="586" y1="491" y2="503"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="593" x2="586" y1="491" y2="503"/>
<text font-family="Dialog" font-size="12" x="599" y="486">
1</text>
<text font-family="Dialog" font-size="12" x="540" y="478">
rdbops</text>
<polyline fill="none" points="834,375 834,47 388,47" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="400" x2="388" y1="40" y2="47"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="400" x2="388" y1="54" y2="47"/>
<text font-family="Dialog" font-size="12" x="392" y="42">
0..*</text>
<text font-family="Dialog" font-size="12" x="395" y="62">
users</text>
<rect fill="#ffc8ff" height="115" stroke="#ffc8ff" stroke-width="1" width="217" x="154" y="383"/>
<rect fill="none" height="115" stroke="#000000" stroke-width="1" width="217" x="154" y="383"/>
<text font-family="Dialog" font-size="12" x="206" y="415">
FriendshipMapper</text>
<text font-family="Dialog" font-size="12" x="214" y="397">
&lt;&lt;interface&gt;&gt;</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="217" x="154" y="425"/>
<text font-family="Dialog" font-size="12" x="158" y="439">
get(String) : Friendship</text>
<text font-family="Dialog" font-size="12" x="158" y="455">
put(Friendship)</text>
<text font-family="Dialog" font-size="12" x="158" y="471">
getFriends(String) : List&lt;String&gt;</text>
<text font-family="Dialog" font-size="12" x="158" y="487">
getPending(String) : List&lt;String&gt;</text>
<rect fill="#ffc8ff" height="66" stroke="#ffc8ff" stroke-width="1" width="167" x="66" y="559"/>
<rect fill="none" height="66" stroke="#000000" stroke-width="1" width="167" x="66" y="559"/>
<text font-family="Dialog" font-size="12" x="70" y="572">
MemoryFriendshipMapper</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="167" x="66" y="582"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="167" x="66" y="603"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="559" y2="554"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="549" y2="544"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="539" y2="534"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="529" y2="524"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="519" y2="514"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="509" y2="504"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="194" x2="194" y1="499" y2="497"/>
<polygon fill="#ffffff" points="194,497 201,509 187,509" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="194,497 201,509 187,509" stroke="#000000" stroke-width="1"/>
<polyline fill="none" points="106,559 106,132" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="113" x2="106" y1="144" y2="132"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="99" x2="106" y1="144" y2="132"/>
<text font-family="Dialog" font-size="12" x="78" y="159">
0..*</text>
<text font-family="Dialog" font-size="12" x="45" y="182">
friendships</text>
<rect fill="#ffc8ff" height="67" stroke="#ffc8ff" stroke-width="1" width="147" x="266" y="559"/>
<rect fill="none" height="67" stroke="#000000" stroke-width="1" width="147" x="266" y="559"/>
<text font-family="Dialog" font-size="12" x="271" y="572">
RDBFriendshipMapper</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="147" x="266" y="582"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="147" x="266" y="603"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="559" y2="554"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="549" y2="544"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="539" y2="534"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="529" y2="524"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="519" y2="514"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="509" y2="504"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="354" x2="354" y1="499" y2="497"/>
<polygon fill="#ffffff" points="354,497 361,509 347,509" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="354,497 361,509 347,509" stroke="#000000" stroke-width="1"/>
<polyline fill="none" points="412,607 490,607" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="478" x2="490" y1="614" y2="607"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="478" x2="490" y1="600" y2="607"/>
<text font-family="Dialog" font-size="12" x="471" y="602">
1</text>
<text font-family="Dialog" font-size="12" x="444" y="622">
rdbops</text>
<polyline fill="none" points="250,316 250,383" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="243" x2="250" y1="371" y2="383"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="257" x2="250" y1="371" y2="383"/>
<text font-family="Dialog" font-size="12" x="264" y="365">
1</text>
<text font-family="Dialog" font-size="12" x="138" y="363">
friendshipMapper</text>
</svg>
